<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head'); %>
    <title>Budget</title>
</head>
<body>
    <div class="container">
        <h1>Budget Summary</h1>
        <button><a href='http://localhost:3000/budget/new'>NEW ITEM</a></button>
        <br>
        <% let bankAccount = Budget.reduce((accum, curr) =>accum + parseInt(curr.amount),0) %>
        <% if (bankAccount < 0) 
            {%><span style="background-color: red;">BankAccount  Total: $<%= bankAccount %></span> <%} 
            else
            {%> <span style="background-color: green;">BankAccount  Total: $<%= bankAccount %></span> <%} 
        %> 
        <table>
            <tr>
                <th>Date</th>
                <th>Item</th>
                <th>Amount ($)</th>
              </tr>
                <% for (const [index,budgt] of Budget.entries()) 
                    {%>
                        <tr>
                            <td><%= budgt.date %></td>
                            <td> <a href='http://localhost:3000/budget/<%= index%>'><%= budgt.name %></a></td>
                            <td><%= budgt.amount %></td>
                        </tr>
                    <%} 
                %>
              
              
        </table>
    </div>

</body>
</html>